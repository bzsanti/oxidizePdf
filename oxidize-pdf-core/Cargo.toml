[package]
name = "oxidize-pdf"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
documentation = "https://docs.rs/oxidize-pdf"
homepage = "https://github.com/bzsanti/oxidizePdf"
description = "A pure Rust PDF generation and manipulation library with zero external dependencies"
keywords = ["pdf", "document", "generation", "parser", "graphics"]
categories = ["graphics", "text-processing", "parsing", "multimedia::images"]
readme = "../README.md"

[dependencies]
# Error handling
thiserror = { workspace = true }

# Utilities
chrono = { workspace = true }
lazy_static = { workspace = true }

# Compression (optional)
flate2 = { workspace = true, optional = true }

# Serialization
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true, optional = true }

# Logging
tracing = { workspace = true }

# Hashing
md5 = "0.8"
sha2 = "0.10"

# Unicode processing
unicode-normalization = "0.1"

# Flags
bitflags = "2.4"

# Parallel processing
num_cpus = "1.16"
rayon = { version = "1.8", optional = true }

# Regular expressions for validation
regex = "1.10"

# TOML parsing for ISO compliance matrix
toml = "0.8"

# Temporary files for external validation
tempfile = "3.8"
rusty-tesseract = { version = "1.1.10", optional = true }

# Platform-specific
[target.'cfg(unix)'.dependencies]
libc = "0.2"

[target.'cfg(windows)'.dependencies]
winapi = { version = "0.3", features = ["memoryapi", "handleapi", "winnt"] }

# Image processing dependencies (optional)
image = { workspace = true, optional = true }

# OCR dependencies (optional)
rusty-tesseract = { version = "1.1.10", optional = true }
# tesseract = { version = "0.15.2", optional = true, features = ["tesseract_5_2"] }
# leptonica-plumbing = { version = "1.0", optional = true }

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }
proptest = "1.7"
tempfile = "3.8"

[[example]]
name = "font_spacing_test"
path = "../examples/src/font_spacing_test.rs"

[[example]]
name = "font_subsetting_test"
path = "../examples/src/font_subsetting_test.rs"

[[example]]
name = "field_actions"
path = "../examples/src/field_actions.rs"

[[example]]
name = "form_validation"
path = "../examples/src/form_validation.rs"

[[example]]
name = "button_fields_demo"
path = "../examples/src/button_fields_demo.rs"

[[example]]
name = "calibrated_colors_demo"
path = "../examples/src/calibrated_colors_demo.rs"

[[example]]
name = "generate_compliance_report"
path = "../examples/src/generate_compliance_report.rs"

[[example]]
name = "parse_iso_spec"
path = "../examples/src/parse_iso_spec.rs"

[[example]]
name = "expand_iso_matrix"
path = "../examples/src/expand_iso_matrix.rs"

[[example]]
name = "compare_iso_matrices"
path = "../examples/src/compare_iso_matrices.rs"

[[example]]
name = "advanced_tables_example"
path = "../examples/advanced_tables_example.rs"

[[example]]
name = "advanced_tables_landscape_example"
path = "../examples/advanced_tables_landscape_example.rs"

[[example]]
name = "advanced_tables_adjusted_example"
path = "../examples/advanced_tables_adjusted_example.rs"

[[example]]
name = "advanced_tables_truncated_example"
path = "../examples/advanced_tables_truncated_example.rs"

[[example]]
name = "charts_example"
path = "../examples/charts_example.rs"

[[example]]
name = "charts_coordinate_problem"
path = "../examples/charts_coordinate_problem.rs"

[[example]]
name = "charts_fixed_example"
path = "../examples/charts_fixed_example.rs"

[[example]]
name = "charts_text_alignment_test"
path = "../examples/charts_text_alignment_test.rs"

[[example]]
name = "charts_comprehensive_test"
path = "../examples/charts_comprehensive_test.rs"

[[example]]
name = "performance_benchmark_1000"
path = "../examples/src/performance_benchmark_1000.rs"

[[example]]
name = "simple_document_benchmark"
path = "../examples/src/simple_document_benchmark.rs"

# Temporarily disabled examples with compilation errors
# [[example]]
# name = "streaming_support"

# [[example]]
# name = "batch_processing"

# [[example]]
# name = "error_recovery"

# [[example]]
# name = "analyze_pdf_rendering"

# Temporarily disabled test file with compilation errors

[[example]]
name = "medium_complexity_benchmark"
path = "../examples/src/medium_complexity_benchmark.rs"

[[example]]
name = "high_complexity_benchmark"
path = "../examples/src/high_complexity_benchmark.rs"

[[example]]
name = "extreme_complexity_benchmark"
path = "../examples/src/extreme_complexity_benchmark.rs"

[[example]]
name = "tesseract_debug"
path = "../examples/src/tesseract_debug.rs"

[[example]]
name = "ocr_selective_regions"
path = "../examples/src/ocr_selective_regions.rs"

[[example]]
name = "ocr_confidence_scoring"
path = "../examples/src/ocr_confidence_scoring.rs"

[[example]]
name = "ocr_post_processing"
path = "../examples/src/ocr_post_processing.rs"

[[example]]
name = "ocr_basic_demo"
path = "../examples/src/ocr_basic_demo.rs"

[[bench]]
name = "ocr_benchmarks"
harness = false

[[bench]]
name = "performance_benchmarks"
harness = false

[features]
default = ["compression"]

# Basic features
compression = ["dep:flate2"]

# Image processing features
external-images = ["dep:image"]

# OCR features
ocr-tesseract = ["dep:rusty-tesseract", "external-images"]
ocr-full = ["ocr-tesseract"]

# Performance features
performance = ["dep:rayon", "compression"]

# Test features
real-pdf-tests = []  # Enable tests with real PDF files from fixtures

# Semantic marking (Community level - basic tagging)
semantic = ["dep:serde_json"]

# Parallel processing features
rayon = ["dep:rayon"]
